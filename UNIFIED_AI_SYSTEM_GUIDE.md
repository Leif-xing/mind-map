# 🤖 统一AI系统使用指南

## 🎯 系统概述

新的统一AI系统将原来的单个AI按钮拆分为两个专门的按钮：
- **AI配置**: 管理AI提供商和模型配置
- **AI创建**: 使用配置好的AI生成思维导图

## 🔧 功能特性

### 支持的AI提供商

#### 1. 火山方舟 (向后兼容)
- **API接口**: `https://ark.cn-beijing.volces.com/api/v3/chat/completions`
- **模型配置**: 用户自定义输入 (如: `ep-xxxxx`)
- **特殊配置**: 支持本地代理端口设置

#### 2. Navy API (新增)
- **API接口**: `https://api.navy/v1/chat/completions`
- **支持模型**:
  - `deepseek-v3.2` - DeepSeek最新版本
  - `gpt-5` - GPT-5模型
  - `gemini-2.5-pro` - Google Gemini Pro
  - `qwen3-235b-a22b-thinking-2507` - 通义千问思考版

## 📋 使用流程

### 步骤1: 配置AI接口
1. 点击工具栏的 **[AI配置]** 按钮
2. 选择AI提供商（火山方舟 或 Navy API）
3. 输入API密钥
4. 选择或输入模型名称
5. 点击 **[测试连接]** 验证配置
6. 点击 **[保存配置]** 完成设置

### 步骤2: 生成思维导图
1. 点击工具栏的 **[AI创建]** 按钮
2. 确认当前使用的提供商和模型
3. 输入思维导图主题
4. 点击 **[开始生成]**
5. 等待AI生成并自动渲染

## 🎨 界面功能

### AI配置界面
```
┌─ AI配置 ─────────────────────────┐
│ 选择AI提供商                      │
│ ○ 火山方舟    ● Navy API         │
│                                  │
│ Navy API 配置                    │
│ ├─ API密钥: [sk-navy-xxxxxxxx]   │
│ ├─ 选择模型: [deepseek-v3.2 ▼]   │
│ │   • deepseek-v3.2             │
│ │   • gpt-5                     │
│ │   • gemini-2.5-pro            │
│ │   • qwen3-235b-a22b-...       │
│ └─ API接口: [只读显示]            │
│                                  │
│ [测试连接] [取消] [保存配置]      │
└──────────────────────────────────┘
```

### AI创建界面
```
┌─ AI创建思维导图 ─────────────────┐
│ 当前使用: Navy API - deepseek-v3.2│
│ [修改配置]                       │
│                                  │
│ 请输入思维导图主题:               │
│ ┌─────────────────────────────┐  │
│ │ 人工智能的发展历程           │  │
│ │                             │  │
│ └─────────────────────────────┘  │
│                                  │
│ [取消] [开始生成]                │
└──────────────────────────────────┘
```

## 💾 配置存储

### 存储结构
```javascript
localStorage: {
  "SIMPLE_MIND_MAP_LOCAL_CONFIG": {
    "aiSystem": {
      "currentProvider": "navy",
      "providers": {
        "huoshan": {
          "config": {
            "key": "your-key",
            "model": "ep-xxxxx",
            "port": 3456
          }
        },
        "navy": {
          "config": {
            "key": "sk-navy-xxxxx",
            "model": "deepseek-v3.2"
          }
        }
      }
    }
  }
}
```

### 配置迁移
系统会自动检测并迁移旧版本的AI配置：
```javascript
// 旧格式 (自动迁移)
{
  "aiConfig": {
    "key": "xxx",
    "model": "ep-xxxxx"
  }
}

// 新格式 (迁移后)
{
  "aiSystem": {
    "currentProvider": "huoshan",
    "providers": {
      "huoshan": {
        "config": {
          "key": "xxx",
          "model": "ep-xxxxx"
        }
      }
    }
  }
}
```

## 🔄 续写功能

续写功能将自动使用当前配置的AI提供商和模型，无需额外配置。

## ⚠️ 注意事项

### API密钥安全
- API密钥存储在本地localStorage中
- 请妥善保管你的API密钥
- 不要在不安全的环境中配置

### 网络要求
- 需要能够访问对应的API接口
- Navy API需要稳定的国际网络连接
- 火山方舟支持本地代理模式

### 错误处理
- 配置错误时会显示详细错误信息
- 支持重新配置和测试连接
- 生成过程中可随时停止

## 🚀 高级功能

### 快速切换提供商
1. 可以为不同提供商保存独立配置
2. 在AI配置中快速切换使用的提供商
3. 系统会记住每个提供商的配置

### 智能提示
- 配置不完整时会自动提示
- 连接失败时提供解决建议
- 生成过程中显示详细状态

---

**🎉 现在你可以使用多个AI提供商来生成思维导图了！根据需要选择最合适的模型。**