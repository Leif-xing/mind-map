# 🔧 AI功能调试指南

## 🔍 问题诊断步骤

### 步骤1：检查浏览器控制台错误

1. **打开开发者工具**
   - 按 `F12` 或右键 → "检查"
   - 切换到 "Console" 标签页

2. **重现AI使用过程**
   - 点击AI按钮
   - 配置AI参数
   - 点击生成
   - 查看控制台是否有红色错误信息

3. **常见错误类型**
   - `CORS error` - 跨域请求被阻止
   - `Network error` - 网络请求失败
   - `403/401 error` - API密钥或权限问题
   - `TypeError` - 代码逻辑错误

### 步骤2：检查网络请求

1. **切换到 Network 标签页**
2. **清空网络日志** (点击🚫按钮)
3. **重新执行AI生成**
4. **查看失败的请求** (红色状态的请求)
5. **点击失败请求查看详细信息**

## 🚨 可能的问题原因

### 原因1：CORS跨域问题
**现象**: 控制台显示类似错误
```
Access to fetch at 'https://ark.cn-beijing.volces.com/api/v3/chat/completions' 
from origin 'https://your-project.vercel.app' has been blocked by CORS policy
```

**解决方案**: 需要使用代理服务器

### 原因2：API配置错误
**现象**: 401/403错误
```
HTTP 401 Unauthorized
HTTP 403 Forbidden
```

**解决方案**: 检查API密钥和接口地址

### 原因3：流式响应处理问题
**现象**: 请求成功但卡住不动
**解决方案**: 可能需要特殊处理流式数据

### 原因4：环境检测问题
**现象**: 仍然尝试访问localhost
**解决方案**: 检查环境检测逻辑

## 🛠️ 紧急修复方案

### 方案A：创建Vercel API代理
创建API路由文件来处理CORS问题。

### 方案B：添加错误处理和日志
增加详细的错误信息输出。

### 方案C：使用不同的AI服务
切换到支持CORS的AI服务。

## 📞 请提供以下信息

为了更好地帮助你，请提供：

1. **浏览器控制台的完整错误信息** (截图或文字)
2. **Network标签页中失败请求的详细信息**
3. **你使用的AI服务商** (火山引擎/OpenAI/其他)
4. **API配置信息** (隐藏密钥，只提供格式)

## 🔧 临时调试版本

我可以创建一个包含详细日志的调试版本，帮助定位具体问题。